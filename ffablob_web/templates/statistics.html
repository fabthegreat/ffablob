{% extends "base.html" %}

{% block titre %}Statistiques{% endblock %}

{% block form %}
	<form action="/" method="get"><!-- Formulaire -->
	    <div class="form-row">
		<div class="col-12 col-md-9 mb-2 mb-md-0">
		    <input type="text" class="form-control form-control-lg" placeholder="Lien de la page de rÃ©sultat FFA (http://...)" name="urlFFA">
		</div>
		<div class="col-12 col-md-3">
		    <button type="submit" class="btn btn-block btn-lg
			btn-primary">Charger</button>
		</div>
	    </div> <!--disposition -->
	</form><!-- Formulaire -->

	{% if error_msg_url %}
		<div class="alert alert-warning" role="alert" style="margin-top:5px;margin-bottom:5px">
			{{ error_msg_url }}
		</div>
	{% endif %}
{% endblock %}

{% block racecart %}
	{% if racelist %}
		<div class="accordion" id="accordionExample">
		{% for race in racelist %}
				<div class="card">
					<div class="card-header" id="heading{{ forloop.counter }}">
						<h5 class="mb-0">
							<button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse{{ forloop.counter }}" aria-expanded="true" aria-controls="collapse{{ forloop.counter }}">
								ID course: {{ race.0 }} Type de course: {{ race.1 }} 
							</button>
							<a href='/flush_cart'><span class="badge badge-pill badge-danger">Supprimer</span></a>
						</h5>
					</div>

					<div id="collapse{{ forloop.counter }}" class="collapse {% if forloop.first %}show{% endif %}" aria-labelledby="heading{{ forloop.counter }}" data-parent="#accordionExample">
						<div class="card-body">
							Formulaire de course
						</div>
					</div>
				</div> 
		{% endfor %}
		</div> 
		<div style='text-align:right;margin:5px'>
		<a href='/flush_cart'><a href='/flush_cart'><span class="badge badge-pill badge-danger">Effacer la liste</span></a>
		</div>
	{% endif %}
{% endblock %}

{% block content %}
		<table class="table" style="margin-top:20px">
			<thead class="thead-dark">
				<tr>
			      		<th scope="col">Classement</th>
                        <th scope="col">Chrono</th>
                        <th scope="col">Coureur</th>
                        <th scope="col">Club</th>
				        <th scope="col">Cat</th>
				        <th scope="col">Sexe</th>
				</tr>
			</thead>
                    <tbody>
                        {% for result in results %}
                        <tr>
                            <th scope="row">{{ result.rstl.0 }} </th>
                            <td>{{ result.rstl.1 }} </td>
                            <td>{{ result.rstl.2 }} </td>
                            <td>{{ result.rstl.4 }} </td>
                            <td>{{ result.rstl.5 }} </td>
                            <td>{{ result.rstl.6 }} </td>
                         </tr>
                        {% endfor %}
		</table>
{% endblock %}

